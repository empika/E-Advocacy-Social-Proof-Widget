(function(c){c.fn.spwWidgetize=function(i,a){var f=this,a=c.extend(!0,{auto_measurement_key:"emailsSent",manual_measurement_key:"manualMeasurement",target_key:"target",measurement_text_key:"measurementText",debug:!1,min_arrow:3,template_html:"       <div id='widget-wrapper'> \t\t\t\t<h4><span class='widget-header-total'><%= total %></span> <span class='header-text'><%= measurement_text %></span></h4> \t\t\t\t<span id='widget-progress-arrow' style='left: <%= progress_arrow_position %>px;'></span> \t\t\t\t<span id='widget-progress-value' style='width: <%= progress_width %>px;'></span> \t\t\t\t<div id='widget-progress-meter'> \t\t\t\t</div> \t\t\t\t<h5><span class='widget-footer-base'>0</span><span class='widget-footer-target'><%= target %></span></h5> \t\t\t</div>       "},
a);a.url=i;a.debug&&c("head").append('        <style type="text/css">           #progress-total{ width: 100%; height: 50px; background: #AAA;}           #progress-bar{ width: 0; height: 50px; background: #CCC;}           #widget-wrapper { background: url("images/progress-bg.png") no-repeat scroll left top transparent; display: block; height: 130px; position: relative; top: 26px; width: 200px; color: #FFF; font-family: helvetica, ariel, sans-serif; }           #widget-progress-arrow { background: url("images/progress-arrow.png") no-repeat scroll left top transparent; display: block; height: 11px; position: absolute; top: 75px; width: 21px; }           #widget-progress-value { background: none repeat scroll 0 0 #EC008C; display: block; height: 10px; left: 0; position: absolute; top: 91px; z-index: 0; }           #widget-progress-meter { background: url("images/progress-meter.png") no-repeat scroll left top transparent; height: 16px; left: 0; position: absolute; top: 89px; width: 200px; }           #widget-wrapper h4 { padding: 10px; }           #widget-wrapper h4 span.widget-header-total { font-size: 30px; text-align: center; display: block; clear: right;}           #widget-wrapper h4 span.header-text { text-align: center; display: block;}           #widget-wrapper h5 { position: relative; top: 10px; color: #000; font-size: 20px; }           #widget-wrapper h5 span.widget-footer-target { float: right; }         </style>     ');
c.ajax({url:a.url,dataType:"jsonp",success:function(d){var b={},h;c(d.feed.entry).each(function(d,e){if(e.title.$t===a.auto_measurement_key||e.title.$t===a.manual_measurement_key||e.title.$t===a.target_key||e.title.$t===a.measurement_text_key)b[e.title.$t]=e.content.$t.replace("value: ","");a.debug&&c("#"+e.title.$t).text(e.content.$t.replace("value: ",""))});b.total=parseInt(b[a.auto_measurement_key],10)+parseInt(b[a.manual_measurement_key],10);b.progress=parseInt(b.total,10)/(parseInt(b[a.target_key],
10)/100);d=f.width()/100*b.progress;h=d>a.min_arrow+10?parseInt(d-11,10):3;d=j(a.template_html,{total:b.total,measurement_text:b[a.measurement_text_key],progress_arrow_position:h,progress_width:d,target:b[a.target_key]});f.html(d)}});var g=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},j=function(a,b){var c="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%-([\s\S]+?)%>/g,function(a,b){return"',_.escape("+
g(b)+"),'"}).replace(/<%=([\s\S]+?)%>/g,function(a,b){return"',"+g(b)+",'"}).replace(/<%([\s\S]+?)%>/g,function(a,b){return"');"+g(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",f=new Function("obj","_",c);return b?f(b,function(a){return new wrapper(a)}):function(a){return f.call(this,a,function(a){return new wrapper(a)})}};return this}})(jQuery);
